<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fejk Case Opening</title>
  <style>
    body { font-family: sans-serif; background: #121212; color: #fff; margin: 0; padding: 0; }
    .topbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: #1e1e1e; }
    .balance { font-size: 18px; }
    .deposit input { width: 80px; margin-right: 5px; }
    .view { display: none; padding: 20px; }
    .active { display: block; }
    .cases-list, .inventory { display: flex; flex-wrap: wrap; gap: 10px; }
    .case-item, .skin-card, .inv-skin { background: #2a2a2a; padding: 10px; cursor: pointer; border-radius: 5px; text-align: center; min-width: 120px; }
    .case-item:hover, .skin-card:hover, .inv-skin:hover { background: #3a3a3a; }
    .roulette-container { overflow: hidden; width: 100%; height: 80px; border: 2px solid #444; position: relative; margin: 20px 0; }
    .roulette-inner { display: flex; transition: transform 0.5s ease-out; }
    .result-area { text-align: center; margin-top: 20px; }
    .btn { padding: 10px 20px; margin: 10px; background: #444; border: none; color: #fff; cursor: pointer; border-radius: 5px; }
    .btn:hover { background: #666; }
    .back-btn { position: absolute; top: 10px; left: 10px; background: #444; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
    #inventorySection { margin-top: 40px; }
  </style>
</head>
<body>

  <div class="topbar">
    <div class="balance">Kasa: $<span id="balance">1000</span></div>
    <div class="deposit">
      <input type="number" id="depositInput" placeholder="Kwota" />
      <button class="btn" id="depositBtn">WPŁAĆ</button>
    </div>
  </div>

  <div id="lobby" class="view active">
    <h1>Wybierz Skrzynkę</h1>
    <div class="cases-list" id="casesList"></div>
  </div>

  <div id="caseView" class="view">
    <div class="back-btn" id="backBtn">Powrót</div>
    <h2 id="selectedCaseName"></h2>
    <button class="btn" id="openCaseBtn">Otwórz Skrzynkę</button>
    <div class="roulette-container">
      <div id="rouletteInner" class="roulette-inner"></div>
    </div>
    <div class="result-area">
      <div>Drop: <span id="resultSkin">Brak</span></div>
      <div>Cena: $<span id="resultPrice">0</span></div>
      <button class="btn" id="toEqBtn">Przenieś do EQ</button>
      <button class="btn" id="sellNowBtn">Sprzedaj Teraz</button>
    </div>
  </div>

  <div id="inventorySection" class="view">
    <h2>Ekwipunek</h2>
    <div class="inventory" id="inventory"></div>
  </div>

  <script>
const balanceEl = document.getElementById("balance");
const depositInput = document.getElementById("depositInput");
const depositBtn = document.getElementById("depositBtn");
const casesList = document.getElementById("casesList");
const openCaseBtn = document.getElementById("openCaseBtn");
const rouletteInner = document.getElementById("rouletteInner");
const resultSkin = document.getElementById("resultSkin");
const resultPrice = document.getElementById("resultPrice");
const toEqBtn = document.getElementById("toEqBtn");
const sellNowBtn = document.getElementById("sellNowBtn");
const lobby = document.getElementById("lobby");
const caseView = document.getElementById("caseView");
const selectedCaseName = document.getElementById("selectedCaseName");
const backBtn = document.getElementById("backBtn");
const inventoryDiv = document.getElementById("inventory");
const inventorySection = document.getElementById("inventorySection");

let balance = 1000;
let inventory = [];
let currentCase = null;
let lastDrop = null;

const skinNames = [
  "Dragon Lore", "Printstream", "The Empress", "Doppler", "Kill Confirmed",
  "Fire Serpent", "Howl", "Blaze", "Water Elemental", "Fade",
  "Asiimov", "Neon Rider", "Cortex", "Poseidon", "Redline",
  "Fever Dream", "Bloodsport", "Decimator", "Neo-Noir", "Phantom Disruptor",
  "Legion of Anubis", "The Traitor", "Chromatic Aberration", "Nightwish", "Visions",
  "Mecha Industries", "Monster Mashup", "Elite Build", "Duality", "Ocean Drive",
  "Vogue", "Slaughter", "Vulcan", "Wildfire", "Ticket to Hell",
  "Lore", "Hyper Beast", "Wasteland Rebel", "Tiger Tooth", "Ice Coaled",
  "Blackiimov", "The Emperor", "Whiteout", "Code Red", "Bullet Rain",
  "Pink DDPAT", "Fuel Injector", "Orbit Mk01", "Graven", "Heirloom"
];

const skins = skinNames.map(name => ({
  name,
  price: Math.floor(Math.random() * 900) + 100,
  chance: Math.random() * 100
}));

const cases = Array.from({ length: 15 }, (_, i) => ({
  name: `Mystery Case ${i + 1}`,
  price: 100 + i * 20,
  skins: [...skins.sort(() => Math.random() - 0.5).slice(0, 10)]
}));

function updateBalance() {
  balanceEl.textContent = balance.toFixed(2);
}

function renderCases() {
  casesList.innerHTML = "";
  cases.forEach((c, idx) => {
    const div = document.createElement("div");
    div.className = "case-item";
    div.innerHTML = `${c.name}<br>($${c.price})`;
    div.onclick = () => {
      currentCase = c;
      selectedCaseName.textContent = `${c.name} - $${c.price}`;
      lobby.classList.remove("active");
      caseView.classList.add("active");
    };
    casesList.appendChild(div);
  });
}

function renderInventory() {
  inventoryDiv.innerHTML = "";
  inventory.forEach(item => {
    const div = document.createElement("div");
    div.className = "inv-skin";
    div.textContent = `${item.name} - $${item.price}`;
    inventoryDiv.appendChild(div);
  });
  inventorySection.classList.add("active");
}

function pickRandomSkin(skins) {
  const total = skins.reduce((sum, s) => sum + s.chance, 0);
  let rand = Math.random() * total;
  for (let skin of skins) {
    if (rand < skin.chance) return skin;
    rand -= skin.chance;
  }
  return skins[skins.length - 1];
}

function animateRoulette(selected) {
  rouletteInner.innerHTML = "";
  const all = [];
  for (let i = 0; i < 30; i++) {
    const fake = currentCase.skins[Math.floor(Math.random() * currentCase.skins.length)];
    all.push(fake);
  }
  all.splice(15, 0, selected);
  all.forEach(skin => {
    const div = document.createElement("div");
    div.className = "skin-card";
    div.textContent = skin.name;
    rouletteInner.appendChild(div);
  });
  rouletteInner.style.transform = "translateX(0px)";
  setTimeout(() => {
    rouletteInner.style.transition = "transform 2s ease-out";
    rouletteInner.style.transform = `translateX(-${(15 * 140)}px)`;
  }, 50);
}

openCaseBtn.onclick = () => {
  if (!currentCase || balance < currentCase.price) return;
  balance -= currentCase.price;
  updateBalance();
  const skin = pickRandomSkin(currentCase.skins);
  animateRoulette(skin);
  lastDrop = skin;
  setTimeout(() => {
    resultSkin.textContent = skin.name;
    resultPrice.textContent = skin.price;
  }, 2100);
};

toEqBtn.onclick = () => {
  if (lastDrop) inventory.push(lastDrop);
  lastDrop = null;
  resultSkin.textContent = "Brak";
  resultPrice.textContent = "0";
  renderInventory();
};

sellNowBtn.onclick = () => {
  if (lastDrop) balance += lastDrop.price;
  updateBalance();
  lastDrop = null;
  resultSkin.textContent = "Brak";
  resultPrice.textContent = "0";
};

depositBtn.onclick = () => {
  const amount = parseFloat(depositInput.value);
  if (!isNaN(amount) && amount > 0) {
    balance += amount;
    updateBalance();
    depositInput.value = "";
  }
};

backBtn.onclick = () => {
  caseView.classList.remove("active");
  inventorySection.classList.remove("active");
  lobby.classList.add("active");
};

renderCases();
updateBalance();
  </script>
</body>
</html>
